var connect = require("connect"),    connectRoute = require("connect-route"),    serveStatic = require("serve-static"),    bodyParser = require("body-parser"),    fs = require("fs"),    app = connect();app.use(serveStatic("./public"));app.use(bodyParser.urlencoded({ extended: false }));app.use(connectRoute(function(router) {    router.post("/save", function(req, res) {        var firstName = req.body.firstName,            lastName = req.body.lastName,            userName = firstName + " " + lastName,            stream;        if (firstName || lastName) {            // create a stream, and create the file if it doesn't exist            stream = fs.createWriteStream("user_name.txt");        } else {            return;        }        stream.on("open", function() {            // write to and close the stream at the same time            stream.end((firstName + "," + lastName + "\n"), "utf-8");            var html = "<!doctype html>" +                "<html><head><title>Hello " + userName + "</title></head>" +                "<body><h1>Hello, " + userName + "!</h1></body></html>";            res.end(html);        });    });    router.get("/get", function(req, res) {        var stream = fs.createReadStream("user_name.txt"),            vals = "",            users;        stream.on("data", function(data) {            vals += data;        });        stream.on("end", function() {            users = vals.split("\n")[0].split(",").join(" ");            var html = "<!doctype html>" +                "<html><head><title>Hello " + users + "</title></head>" +                "<body><h1>Hello, " + users + "!</h1></body></html>";            res.end(html);        });    });}));app.listen(8000);